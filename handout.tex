\documentclass[a4paper,10pt]{scrartcl}
\usepackage{style}

\titlehead{Graduate Seminar on Representation Theory \hfill July 12, 2019}
\title{DG-Enhancement of Triangulated~Categories}
\subtitle{Problems with \\ Triangulated and Derived~Categories \\ and How to Circumvent Them}
\author{Jendrik Stelzner}
\date{}

\begin{document}

\maketitle

\vspace{-1em}





By a \defemph{chain complex} we always mean a cochain complex, i.e.\ the differenital increases the degree.





\section{Problems with Triangulated Categories}



\subsection{About the Abelianess of Triangulated Categories}

\begin{definition}
  An abelian category~$\Acat$ is \defemph{semisimple abelian} or simply \defemph{semisimple} if every short exact sequence in~$\Acat$ splits.
\end{definition}

\begin{lemma}
  \label{epi in triangulated splits}
  In a triangulated category every epimorphism splits.
\end{lemma}

\begin{proof}
  Let~$f \colon x \to y$ be an epimorphism in a triangulated category~$\Tcat$.
  We may complete~$f$ to a distinguished triangle
  \[
    x
    \xlongto{f}
    y
    \xlongto{g}
    z
    \xlongto{h}
    \Sigma(x) \,.
  \]
  The composition of any two morphisms in a distinguished triangle vanishes, so~$gf = 0$.
  It follows that~$g = 0$ since~$f$ is an epimorphism.
  By applying the homological functor~$\Tcat(y,-)$ to this distinguished triangle we arrive at the followig long exact sequence:
  \[
    \dotsb
    \to
    \Tcat(y,x)
    \xlongto{f_*}
    \Tcat(y,y)
    \xlongto{0}
    \Tcat(y,z)
    \to
    \dotsb
  \]
  We find that for~$\id_y \in \Tcat(y,y)$ there exists some~$s \in \Tcat(y,x)$ with~$\id_y = f_*(s) = fs$.
\end{proof}

\begin{corollary}
  \label{triangulated abelian is semisimple}
  A triangulated category that is abelian is already semisimple.
  \qed
\end{corollary}

We see from \cref{triangulated abelian is semisimple} that most triangulated categories are not abelian.

\begin{proposition}
  \label{when the derived is abelian}
  For an abelian category~$\Acat$ the following conditions on~$\Acat$ and its derived category~$\Derived(\Acat)$ are equivalent:
  \begin{enumerate}
    \item
      \label{derived is abelian}
      The derived category~$\Derived(\Acat)$ is abelian.
    \item
      \label{derived is semisimple abelian}
      The derived category~$\Derived(\Acat)$ is semisimple abelian.
    \item
      \label{original is semisimple}
      The abelian category~$\Derived(\Acat)$ is semisimple.
  \end{enumerate}
  If these equivalent conditions are satisfied then~$\Derived(\Acat) \equiv \Acat^\Integer$ via the homology functor~$\Homology_* \colon \Derived(\Acat) \to \Acat^\Integer$.
  A quasi-inverse~$\Acat^\Integer \to \Derived(\Acat)$ is given by regarding every objects of~$\Acat^\Integer$ as a chain complex with zero differential.
\end{proposition}


\begin{proof}
  \leavevmode
  \begin{implicationslist}
    \item[\ref{original is semisimple}~$\implies$~\ref{derived is abelian}:]
      We realize~$\Derived(\Acat)$ by first passing from the category of chain complexes~$\Ch(\Acat)$ to its homotopy category~$\KHomotopy(\Acat)$ and then localizing~$\KHomotopy(\Acat)$ at the class of quasi-equivalences.
      
      Every chain complex~$X \in \Ob(\Ch(\Acat))$ splits%
      \footnote{Recall that a chain complex~$X$ is said to \defemph{split} if it can be (up to isomorphism) degreewise decomposed as~$X^n = B^n \oplus H^n \oplus B_{n+1}$ such that the differential of~$X$ is with respect to this decomposition given by~$\begin{bsmallmatrix} 0 & 0 & 1 \\ 0 & 0 & 0 \\ 0 & 0 & 0 \end{bsmallmatrix}$.
      Then~$\Cycles^n(X) = B^n \oplus H^n$,~$\Boundaries^n(X) \cong B^n$ and~$\Homology^n(X) = H^n$.
      The claimed decompositon~$X = X' \oplus X''$ is then given degreewise by~$X'^n = B_{n+1} \oplus B^n$ with differential~$\begin{bsmallmatrix} 0 & 1 \\ 0 & 0 \end{bsmallmatrix}$ and~$X''^n = H^n$.}
      since~$\Acat$ is semisimple, and can thus be decomposed as~$X = X' \oplus X''$ where~$X'$ is split acyclic while~$X''$ has zero differential.
      In the homotopy category~$\KHomotopy(\Acat)$ the chain complex~$X'$ becomes zero as it is split acyclic and hence contractible.
      Every isomorphism class in~$\KHomotopy(\Acat)$ is therefore represented by a chain complex with zero differential, i.e.\ an object of~$\Acat^\Integer$.
      Every nullhomotopy between such chain complexes is trivial (as the differential is zero) so no two morphisms between such chain complexes become identified in~$\KHomotopy(\Acat)$.
      This shows that the categories~$\KHomotopy(\Acat)$ and~$\Acat^\Integer$ are equivalent.
      We note that this equivalence is given by~$\Homology_* \colon \KHomotopy(\Acat) \to \Acat^\Integer$.
      
      We also see that a quasi-isomorphism between chain complexes with zero differentials must already be an isomorphsim.
      We therefore see that~$\Derived(\Acat)$ is just~$\KHomotopy(\Acat)$ again.
      It follows that~$\Derived(\Acat)$ is equivalent to~$\Acat^\Integer$.
      
    \item[\ref{derived is abelian}~$\implies$~\ref{derived is semisimple abelian}:]
      This follows from \cref{triangulated abelian is semisimple}.
    
    \item[\ref{derived is semisimple abelian}~$\implies$~\ref{original is semisimple}]
      We first observe that an abelian category~$\Bcat$ is semisimple if and only if every morphism~$f \colon x \to y$ in~$\Bcat$ admits a \defemph{pseudoinverse}~$g \colon y \to x$ satisfying~$fgf = f$ and~$gfg = g$:
      If every morphism~$f$ in~$\Bcat$ admits such a pseudoinverse~$g$ then it follows for every epimorphism~$f$ from~$fgf = f$ that~$fg = \id$ so that~$f$ splits. 
      If on the other hand~$\Bcat$ is semisimple and~$f \colon x \to y$ any morphism in~$\Bcat$ then we have decompositions~$x = x' \oplus \ker(f)$ and~$y = y' \oplus \im(f)$ with~$f$ inducing an isomorphism~$x' \to \im(f)$.
      The inverse~$\im(f) \to x'$ together with the projection~$y \to \im(f)$ and the inclusion~$x' \to x$ then give the desired pseudoinverse~$g \colon y \to x$.
      
      We find that by assumption every morphism in~$\Derived(\Acat)$ admits a pseudoinverse.
      Every morphism~$f$ in~$\Acat$ hence admits a pseudoinverse~$g$ in~$\Derived(\Acat)$ (where we regard~$\Acat$ as chain complexes concentrated in degree~$0$) which becomes a pseudoinverse~$\Homology_0(g)$ to~$f$ in~$\Acat$.
      This shows that every morphism in~$\Acat$ admits a pseudoinverse, so that~$\Acat$ is semisimple.
    \qedhere
  \end{implicationslist}
\end{proof}



\subsection{Non-Functoriality of Cones}

Triangulated categories do in general not admit functorial cones.
As a consequence of this, we see that for a triangulated category~$\Tcat$ and a (small) index category~$I$ the diagram category~$\Fun(I, \Tcat)$ does in general not inherit a triangulated structure from~$\Tcat$:

Given a morphism~$f \colon D \to D'$ in~$\Fun(I, \Tcat)$ we would otherwise like to compute its cone for the inherited triangulated structure of~$\Fun(I, \Tcat)$ pointwise, i.e.\ via
\[
  \cone(f)(i)
  =
  \cone(f_i)
\]
at every position~$i \in \Ob(I)$, where~$f_i \colon D(i) \to D'(i)$.

But~$\cone(f)$, which is supposed to be a funcor~$\cone(f) \colon I \to \Tcat$, also needs to be defined on morphisms of~$I$.
For every such morphism~$e \colon i \to j$ in~$I$ we would hence need an induced morphism~$\cone(f)(e) \colon \cone(f)(i) \to \cone(f)(j)$, i.e.\ an induced morphismp$\cone(f)(e) \colon \cone(f_i) \to \cone(f_j)$.
The good thing is that there exists by the axioms of a triangulated category some morphism~$\cone(e) \colon \cone(f_i) \to \cone(f_j)$ that makes the diagram
\[
  \begin{tikzcd}
    D(i)
    \arrow{r}[above]{f_i}
    \arrow{d}[left]{D(i)}
    &
    D'(i)
    \arrow{d}[right]{D(j)}
    \arrow{r}
    &
    \cone(f_i)
    \arrow[dashed]{d}
    \\
    D(j)
    \arrow{r}[below]{f_j}
    &
    D'(j)
    \arrow{r}
    &
    \cone(f_j)
  \end{tikzcd}
\]
commute.
But by the missing functoriality of the cone this does in general not define a functor~$\cone(f) \colon I \to \Tcat$ and hence not an object of~$\Fun(I, \Tcat)$.

The missing functoriality of the cone can in general not be fixed, as the following result asserts:

\begin{proposition}
  Let~$\Tcat$ be an idempotent complete triangulated category.
  If~$\Tcat$ admits functorial cones then~$\Tcat$ is abelian and semisimple.
\end{proposition}



\subsection{Difference between~$\Derived(\Acat)^I$ and~$\Derived(\Acat^I)$}

One might suspect that for~$\Tcat = \Derived(\Acat)$, where~$\Acat$ is some abelian category, the above problems can be fixed by using an equivalence~$\Derived(\Acat)^I \equiv \Derived(\Acat^I)$.
(Note that the category~$\Acat^I$ is again abelian.)
The problem is that there is in general no such equivalence.

Take for example~$\Acat = \Vect{k}$ and let~$I = (\bullet \to \bullet)$ be the category consisting of two objects~$0$ and~$1$ and one non-identity morphism~$0 \to 1$.
The abelian category~$\Acat$ is semisimple whence~$\Derived(\Acat)^I$ is again abelian by \cref{when the derived is abelian}.
But the functor category~$\Acat^I = \Fun(I, \Acat)$ is equivalent to the category of representations of the quiver~$\bullet \to \bullet$ and therefore not abelian.
The derived category~$\Derived(\Acat^I)$ is thus not again abelian.
This shows that~$\Derived(\Acat)^I$ is abelian but~$\Derived(\Acat^I)$ is not abelian, which entails that these categories are not equivalent.



\subsection{(Non-)Existence of Limits and Colimits}

A triangulated category~$\Tcat$ is in general neither complete nor cocomplete.

We see for example that in the category~$\Derived(\Integer) = \Derived(\Mod{\Integer})$ the nonzero morphism~$f \colon \Integer/2 \to \Integer/4$ does not admit a cokernel:
Suppose otherwise that~$c \colon \Integer/4 \to C$ is a such a cokernel.
Then~$c$ splits in~$\Derived(\Integer)$ by \cref{epi in triangulated splits}.
It follows that~$\Homology^0(c) \colon \Integer/4 \to \Homology^0(C)$ splits in~$\Mod{\Integer}$.
But~$\Integer/4$ is indecomposable, so it follows that~$\Homology^0(c) = 0$ or~$\Homology^0(c)$ is an isomorphism.

If~$\Homology^0(c) = 0$ then we consider the nonzero morphism~$g \colon \Integer/4 \to \Integer/2$.
It follows from~$g \circ f = 0$ that~$g$ factors trough~$C$ is~$\Derived(\Integer)$ and therefore factors through~$\Homology^0(C)$ in~$\Mod{\Integer}$.
But this is not possible since~$\Homology^0(C) = 0$ while~$g \neq 0$.

Suppose that~$\Homology^0(c)$ is an isomorphism.
It follows from~$c \circ f = 0$ in~$\Derived(\Mod{\Integer})$ that~$\Homology^0(c) \circ f = 0$ in~$\Mod{\Integer}$.
It now further follows that~$f = 0$ which is wrong.





\section{Solution: Working Derived}

We picture one approach to circumvent the non-functoriality of the cone:
We denote for any category~$\Ccat$ by~$\Mor(\Ccat)$ its morphism category.
We have~$\Mor(\Ccat) \iso \Ccat^I$ for the arrow category~$I = (\bullet \to \bullet)$.



\subsection{Functorial Cones}

We have seen that for a triangulated category~$\Tcat$ there exists in general no cone functor~$\Mor(\Tcat) \to \Tcat$, i.e.\ no cone functor~$\Tcat^I \to \Tcat$.
But if~$\Tcat = \Derived(\Acat)$ for some abelian category~$\Acat$ then we have seen above that the categories~$\Tcat^I = \Derived(\Acat)^I$ and~$\Derived(\Acat^I)$ are in general not equivalent.
We can therefore instead try to construct a cone functor~$\cone \colon \Derived(\Acat^I) \to \Derived(\Acat)$.

This is indeed possible:
We start with the usual cone functor
\[
  C
  \colon
  \Ch(\Acat)^I
  \to
  \Ch(\Acat)
\]
which assigns to each morphism~$f \colon X \to Y$ in~$\Ch(\Acat)$ the usual mapping cone
\[
  C(f)
  =
  \left(
  X[1] \oplus Y,
  \begin{bmatrix}
    -d_X & 0   \\
      f   & d_Y
  \end{bmatrix}
\right) \,.
\]
and to each commmutative diagram
\[
  \begin{tikzcd}
    X
    \arrow{r}[above]{g}
    \arrow{d}[left]{f}
    &
    X'
    \arrow{d}[right]{f'}
    \\
    Y
    \arrow{r}[above]{h}
    &
    Y'
  \end{tikzcd}
\]
the induced morphism
\[
  C(g,h)
  \colon
  C(f)
  \xlongto{ \begin{bmatrix} g & 0 \\ 0 & h \end{bmatrix} }
  C(f') \,.
\]
This functor is additive, and under the identification of~$\Ch(\Acat)^I \iso \Ch(\Acat^I)$ this cone functor~$C$ respect quasi-isomorphisms:
The quasi-isomorphism in~$\Ch(\Acat^I)$ correspond to a pointwise quasi-isomorphism in~$\Ch(\Acat)^I$.
If~$(g,h) \colon f \to f'$ in~$\Ch(\Acat)^I$ is such a pointwise quasi-isomorphism, i.e.\ if both~$g$ and~$h$ are quasi-isomorphism, then
\[
  \begin{tikzcd}[sep = large, ampersand replacement = \&]
    0
    \arrow{r}
    \&
    Y
    \arrow{r}[above]{\begin{bsmallmatrix} 0 \\ 1 \end{bsmallmatrix}}
    \arrow{d}[left]{h}
    \&
    C(f)
    \arrow{r}[above]{\begin{bsmallmatrix} -1 & 0 \end{bsmallmatrix}}
    \arrow{d}[right]{C(g,h)}
    \&
    X[1]
    \arrow{r}
    \arrow{d}[right]{g}
    \&
    0
    \\
    0
    \arrow{r}
    \&
    Y'
    \arrow{r}[above]{\begin{bsmallmatrix} 0 \\ 1 \end{bsmallmatrix}}
    \&
    C(f')
    \arrow{r}[above]{\begin{bsmallmatrix} -1 & 0 \end{bsmallmatrix}}
    \&
    X'[1]
    \arrow{r}
    \&
    0
  \end{tikzcd}
\]
is a commutative diagram with short exact rows.
We get an induced ladder diagram from the functoriality of the long exact cone sequence, with~$h$ and~$g$ inducing vertical isomorphisms.
It follows from the five lemma that~$C(g,h)$ also induces isomorphisms in homology, i.e.\ is a quasi-isomorphism.
It follows that the cone functor~$C$ descends to an additive functor
\[
  C
  \colon
  \Derived\bigl( \Acat^I \bigr)
  \to
  \Derived( \Acat )
\]
where~$\Derived(\Acat^I) = \Derived(\Mor(\Acat))$.



\subsection{Colimits and Limits}

Let~$I$ be an index category and let~$\Delta \colon \Ccat \to \Ccat^I$ be the constant diagram functor.
Recall that the existence of (co)limits of~{\shaped{$I$}} diagrams in~$\Ccat$ is equivalent to~$\Delta$ admiting adjoints
\[
  \colim_I \ladjoint \Delta \ladjoint \lim_I \,.
\]
That a derived category~$\Derived(\Acat)$ does in general not admit (co)limits can be circumvented by considering \defemph{homotopy (co)limits} instead:

The constant diagram functor~$\Delta \colon \Ch(\Acat) \to \Ch(\Acat)^I \cong \Ch(\Acat^I)$ is additive and respects quasi-isomorphisms and hence descends to an additive functor
\[
  \Delta
  \colon
  \Derived(\Acat) \to \Derived(\Acat^I) \,.
\]
If~$\Acat$ admits all (co)limits of shape~$\Acat^I$ then it follows 
This functor admits both a left and a right adjoint:
\[
  \hocolim_I \ladjoint \Delta \ladjoint \holim_I \,.
\]



\subsection{Description as Total Derived Functors}






\section{Solution: DG-Enhancement}

In the following we denote by~$k$ some commutative ring.

A dg enhancement of category~$\Tcat$ is, roughly speaking, a dg-category~$\Acat$ together with an equivalence~$\Tcat \equiv \Homology^0(\Acat)$.
If the category~$\Tcat$ carries additional structures which we want to be respected by this equivalence, then we need to make sure than the homotopy category~$\Homology^0(\Acat)$ does carry such a structure itself.
If~$\Tcat$ is a triangulated category then this leads us to the notion of a pretriangulated dg-category.



\subsection{Review on DG-Categories}

The k-linear category~$\Ch(k)$ together with the tensor product of chain complexes becomes a symmetric monoidal category.
A \defemph{dg-category} is an enriched category oever~$\Ch(k)$.
More precisely, a dg-category~$\Acat$ consists of a class of objects~$\Ob(\Acat)$, for any two objects~$x, y \in \Acat$ a chain complex~$\Acat(x,y)$, for any three objects~$x, y, z \in \Ob(\Acat)$ a morphism of chain complexes
\[
  (-) \circ (-)
  \colon
  \Acat(y,z) \tensor \Acat(x,y)
  \to
  \Acat(x,z)
\]
satisfying the usual associativity diagram, and for every object~$x \in \Ob(\Acat)$ an element~$1_x \in \Cycles^0(\Acat(x,y))$ satifying the usual identity diagrams.
As an example we enrich~$\Ch(k)$ into a dg-category~$\dgCh(k)$ with~$\dgCh(k)(X,Y) = \dgHom(X,Y)$ being the usual~$\Hom$-chain complex.

To any dg-category~$\Acat$ we can associated the~{\klinear} categories~$\Cycles^0(\Acat)$ and~$\Homology^0(\Acat)$ that are given by~$\Ob(\Cycles^0(\Acat)) = \Ob(\Homology^0(\Acat))$ and
\[
  \Cycles^0(\Acat)(x,y)
  =
  \Cycles^0(\Acat(x,y))
  \quad\text{and}\quad
  \Homology^0(\Acat)(x,y)
  =
  \Homology^0(\Acat(x,y)) \,.
\]
The composition of morphisms in~$\Cycles^0(\Acat)$ and~$\Homology^0(\Acat)$ is induced by the compositions in~$\Acat$.
As an example we have~$\Cycles^0(\dgCh(k)) = \Ch(k)$ and~$\Homology^0(\dgCh(k)) = \KHomotopy(k)$.

This examples motivates that one should think about~$\Cycles^0(\Acat)$ as the \enquote{underlying~{\klinear} category of~$\Acat$}, and as the elements of~$\Cycles^0(\Acat(x,y))$ as the \enquote{actual morphisms} from~$x$ to~$y$.

A \defemph{dg-functor}~$F \colon \Acat \to \Bcat$ is given by a map~$F \colon \Ob(\Acat) \to \Ob(\Bcat)$ and morphisms of chain complexes~$F_{x,y} \colon \Acat(x,y) \to \Bcat(F(x), F(y))$ for any two objects~$x, y \in \Ob(\Acat)$, satisfying the usual axioms.
Every dg-functor~$F \colon \Acat \to \Bcat$ induces~{\klinear} functors~$\Cycles^0(\Acat) \to \Cycles^0(\Bcat)$ and~$\Homology^0(\Acat) \to \Homology^0(\Bcat)$.

A dg-natural transformation~$\alpha \colon F \To G$ between dg-functors~$F, G \colon \Acat \to \Bcat$ assigns to is a family~$\alpha = (\alpha_x)_{x \in \Ob(\Acat)}$ of \enquote{actual morphisms}~$\alpha_x \in \Cycles^0(\Bcat(F(x), G(x)))$ with~$\alpha_y \circ F(f) = G(f) \circ \alpha_x$ for every~$f \in \Acat(x,y)$.
We get a~{\klinear} abelian category~$\dgFun(\Acat, \Bcat)$ whose objects are dg-functors~$\Acat \to \Bcat$ and whose morphisms are dg-natural transformations.
This category can be enriched into a dg-category~$\dgdgFun(\Acat, \Bcat)$ with
\[
  \dgdgFun(\Acat, \Bcat)(F,G)^i
  =
  \left\{
    (\alpha_x)_{x \in \Ob(\Acat)}
  \suchthat*
    \begin{tabular}{@{}c@{}}
      $\alpha_x \in \Bcat(F(x), G(x))^i$ with \\
      $\alpha_y \circ F(f) = (-1)^{ij} G(f) \circ \alpha_x$ \\
      for every~$f \in \Acat(x,y)^j$
    \end{tabular}
  \right\}
\]
being a subcomplex of~$\prod_{x \in \Ob(\Acat)} \Bcat(F(x), G(x))$.
Then in particular
\[
  \Cycles^0(\dgdgFun(\Acat, \Bcat))
  =
  \dgFun(\Acat, \Bcat) \,,
\]
so that~$\dgFun(\Acat, \Bcat)$ is the underlying~{\klinear} category of~$\dgdgFun(\Acat, \Bcat)$.

For a dg-category~$\Acat$ a \defemph{(right)~{\dgmodule{$\Acat$}}} is a dg-functor~$M \colon \Acat^{\op} \to \dgCh(k)$.
This means that at every object~$x \in \Ob(\Acat)$ we have a chain complex~$M_x$, and for every~$f \in \Acat(x,y)^i$ we have associated a map~$M(f) \colon M(y) \to M(x)$ of degree~$i$ such that~$M(g \circ f) = (-1)^{ij} M(f) \circ M(g)$ for all~$f \in \Acat(x,y)^i$ and~$g \in \Acat(y,z)^j$.
The category of~{\dgmodules{$\Acat$}} is given by~$\dgMod{\Acat} = \dgFun(\Acat^{\op}, \dgCh(k))$, and its dg-enrichement by~$\dgdgMod{\Acat} = \dgdgFun(\Acat^{\op}, \dgCh(k))$.
The category~$\dgMod{\Acat}$ is abelian, complete and cocomplete, and all (co)limits are computed pointwise.



\subsection{Review on Frobenius Exact Structures}

The abelian category~$\Ch(k)$ admits a Frobenius exact structure~$\Sfrob_k$ whose associated~{\stable{$\Sfrob_k$}} triangulated category is precisely~$\KHomotopy(k)$.
For every chain complex~$X$ its \defemph{\injective{$\Sfrob_k$} envelope} is given by the chain complex
\[
  IX
  =
  \left(
    X \oplus X[1],
    \begin{bmatrix}
      0 & 1 \\
      0 & 0
    \end{bmatrix}
  \right)
\]
which fits into the short exact sequence
\begin{equation}
  \label{ses of chain complexes}
  0
  \to
  X
  \xlongto{ i_X }
  IX
  \xlongto{ p_X }
  X[1]
  \to
  0
\end{equation}
belonging to~$\Sfrob_k$, where
\[
  i_X
  =
  \begin{bmatrix}
    1 \\
    d_X
  \end{bmatrix}
  \quad\text{and}\quad
  p_X
  =
  \begin{bmatrix}
    -d_X & 1
  \end{bmatrix} \,.
\]

The~{\klinear} functors~$I, [1] \colon \Ch(k) \to \Ch(k)$ and natural transformations~$i \colon 1 \To I$ and~$p \colon I \To [1]$ extends to a dg-functors~$I, [1] \colon \dgCh(k) \to \dgCh(k)$ and dg-natural transformations~$i \colon 1 \To I$ and~$p \colon I \to [1]$.
By applying~$\dgFun(\Acat^{\op}, -)$ these in turn induce a {\klinear} functors
\[
  I, [1]
  \colon
  \dgMod{\Acat}
  \to
  \dgMod{\Acat}
\]
together with natural transformations~$i \colon 1 \To I$ and~$p \colon I \To [1]$.
We get for every {\dgmodule{$\Acat$}}~$M$ a short exact sequence of~{\dgmodules{$\Acat$}}
\begin{equation}
  \label{ses of dg modules}
  0
  \to
  M
  \xlongto{i_M}
  IM
  \xlongto{p_M}
  M[1]
  \to
  0
\end{equation}
that gives at every point~$x \in \Ob(\Acat)$ the short exact sequence of chain complexes
\[
  0
  \to
  M_x
  \xlongto{i_{M_x}}
  IM_x
  \xlongto{p_{M_x}}
  M_x[1]
  \to
  0
\]
from~\eqref{ses of chain complexes} with~$X = M_x$.
The short exact sequence~\eqref{ses of dg modules} belongs to a Frobenus exact structure~$\Sfrob_{\Acat}$ on~$\dgMod{\Acat}$ whose stable triangulated category is precisely the homotopy category~$\Homology^0(\dgdgMod{\Acat})$, with~$i_M \colon M \to IM$ being an~{\injective{$\Sfrob_{\Acat}$}} envelope of~$M$ for every~{\dgmodule{$\Acat$}}~$M$.
This description of~$\Homology^0(\dgdgMod{\Acat})$ and its triangulated structure has two consequences we will need:
\begin{enumerate}
  \item
    A morphsim~$f \colon M \to N$ in~$\dgMod{\Acat}$ vanishes in~$\Homology^0(\dgdgMod{\Acat})$ if and only it factors through some~{\injective{$\Sfrob_{\Acat}$}} object~$I$ of~$\dgMod{\Acat}$, i.e.\ if there exists in~$\dgMod{\Acat}$ a commutative diagram of the following form:
    \[
      \begin{tikzcd}[column sep = small]
        M
        \arrow{rr}[above]{f}
        \arrow{dr}
        &
        {}
        &
        N
        \\
        {}
        &
        I
        \arrow{ur}
        &
        {}
      \end{tikzcd}
    \]
    The morphism~$M \to I$ factors through the morphism~$i_M \colon M \to IM$ since we have by the definition of an~{\injective{$\Sfrob_{\Acat}$}} object the following diagram:
    \[
      \begin{tikzcd}
        {}
        &
        I
        &
        {}
        &
        {}
        &
        {}
        \\
        0
        \arrow{r}
        &
        M
        \arrow{u}
        \arrow{r}[above]{i_M}
        &
        IM
        \arrow[dashed, bend right]{ul}
        \arrow{r}[above]{p_M}
        &
        M[1]
        \arrow{r}
        &
        0
      \end{tikzcd}
    \]
    It follows that~$f$ already factors through~$i_M \colon M \to IM$.
  \item
    We get a description of the distinguished triangles in~$\Homology^0(\dgdgMod{\Acat})$ from Happel’s theorem:
    Let
    \[
      \begin{tikzcd}
        0
        \arrow{r}
        &
        M
        \arrow{r}[above]{i_M}
        \arrow{d}[left]{f}
        &
        IM
        \arrow{r}[above]{p_M}
        \arrow{d}
        &
        M[1]
        \arrow{r}
        \arrow[equal]{d}
        &
        0
        \\
        0
        \arrow{r}
        &
        N
        \arrow{r}[below]{g}
        &
        P
        \arrow{r}[below]{h}
        &
        M[1]
        \arrow{r}
        &
        0
      \end{tikzcd}
    \]
    be be a commutative diagram in~$\dgMod{\Acat}$ whose rows are contained in~$\Sfrob_{\Acat}$ and where the left hand square is a pushout square.
    Then the resulting sequence
    \[
      M
      \xlongto{f}
      N
      \xlongto{g}
      P
      \xlongto{h}
      M[1]
    \]
    in~$H^0(\dgdgMod{\Acat})$ is a distinguished triangle.
    (And every distinguished triangle is up to isomorphism of this form.)
\end{enumerate}


\subsection{Pretriangulated DG-Categories}

\begin{definition}
  A dg-functor~$F \colon \Acat \to \Bcat$ is \defemph{dg-fully faithful} if for every two objects~$x, y \in \Acat$ the morphism of chain complexes~$F_{x,y} \colon \Acat(x,y) \to \Bcat(F(x), F(y))$ is an isomorphism.
\end{definition}

\begin{proposition}[dg-Yoneda embedding]
  Let~$\Acat$ be a dg-category.
  Then the mapping
  \[
    \Acat
    \to
    \dgdgMod{\Acat} \,,
    \quad
    x
    \mapsto
    \Acat(-,x)
    =
    \Acat^{\op}(x,-)
  \]
  extends (in the usual way) to a dg-fully faithful dg-functor.
\end{proposition}

\begin{definition}
  A dg-category~$\Acat$ is \defemph{pretriangulated} if the fully faithful {\klinear} functor
  \[
    \Homology^0(\Acat)
    \to
    \Homology^0(\dgdgMod{\Acat})
  \]
  induces by the Yoneda embedding~$\Acat \to \dgdgMod{\Acat}$ identifies~$\Acat$ with a triangulated subcategory of~$\Homology^0(\dgdgMod{\Acat})$.
\end{definition}

The above definition ensures that for a pretriangulated dg-category~$\Acat$ its homotopy category~$\Homology^0(\Acat)$ does carry in a canonical way the structure of a triangulated category.

\begin{definition}
  A \defemph{dg-enhancement} of a triangulated category~$\Tcat$ is a pretriangulated category~$\Acat$ together with an equivalence of triangulated categories~$\Tcat \simeq \Homology^0(\Acat)$.
\end{definition}


A dg-enhancement of a triangulated category~$\Tcat$ allows us to identity~$\Tcat$ with a full triangulated subcategory of~$\Homology^0(\dgdgMod{\Acat})$ for some dg-category~$\Acat$.
We can then try to understand the original triangulated category~$\Tcat$ through the \enquote{higher structure} of the dg-category~$\Acat$.



\subsection{Cones as Derived Cokernels}

Recall that if~$f \colon x \to y$ is a morphism in an (pre)additive category~$\Acat$ then its cokernel (which does not need to exists) can be thought of in two equivalent ways:
\begin{itemize}
  \item
    A morphism~$\coker(f) \to z$ into any other object is \enquote{the same} as a morphism~$g \colon y \to z$ with~$g f = 0$.
  \item
    The cokernel~$\coker(f)$ is the pushout of the following diagram:
    \[
      \begin{tikzcd}
        x
        \arrow{r}[above]{f}
        \arrow{d}
        &
        y
        \\
        0
        &
        {}
      \end{tikzcd}
    \]
\end{itemize}

In a triangulated category~$\Tcat$ we do in general have neither cokernels nor pushouts.
But given a dg-enhancement~$\Tcat \equiv \Homology^0(\Acat)$ for some pretriangulated dg-category~$\Acat$ we can identify~$\Tcat$ with a full triangulated subcategory of~$\Homology^0(\dgdgMod{\Acat})$.
We can then do the desired calculations in the abelian category~$\dgMod{\Acat} = \Cycles^0(\dgdgMod{\Acat})$ wich admits all (small) colimits and limits.

More precisely, given a fixed morphism~$f \colon M \to N$ in~$\dgMod{\Acat}$ try to understand all morphisms~$g \colon N \to P$ in~$\dgMod{\Acat}$ for which the composition~$g \circ f$ vanishes in~$\Homology^0(\dgdgMod{\Acat})$.
We have previously seen that~$g \circ f$ vanishes if and only if~$g \circ f$ factors through~$i_M \colon M \to IM$.
We are hence interested in the pushout of the diagram
\[
  \begin{tikzcd}
    M
    \arrow{r}[above]{f}
    \arrow{d}[left]{i_M}
    &
    N
    \\
    IM
    &
    {}
  \end{tikzcd}
\]
in~$\dgMod{\Acat}$.
This pushout is computed pointwise, hence we want to compute for every~$x \in \Ob(\Acat)$ the pushout
\[
  \begin{tikzcd}
    M_x
    \arrow{r}[above]{f_x}
    \arrow{d}[left]{i_{M_x}}
    &
    N_x
    \\
    I M_x
    &
    {}
  \end{tikzcd}
\]
in the category~$\Ch(k)$ where
\[
  I M_x
  =
  \left(
    M_x \oplus M_x[1],
    \begin{bmatrix}
      0 & 1 \\
      0 & 0
    \end{bmatrix}
  \right)
  \quad\text{and}\quad
  i_{M_x}
  =
  \begin{bmatrix}
    1 \\
    d_{M_x}
  \end{bmatrix} \,.
\]

\begin{lemma}
  For every morphism of chain complexes~$f \colon X \to Y$ the pushout of
  \[
    \begin{tikzcd}
      X
      \arrow{r}[above]{f}
      \arrow{d}[left]{i_X}
      &
      Y
      \\
      IX
      &
      {}
    \end{tikzcd}
  \]
  in~$\Ch(k)$ is given by
  \[
    \begin{tikzcd}[ampersand replacement = \&, row sep = large, column sep = huge]
      X
      \arrow{r}[above]{f}
      \arrow{d}[left]{i_X}
      \&
      Y
      \arrow{d}[right]{\begin{bsmallmatrix} 0 \\ 1 \end{bsmallmatrix}}
      \\
      IX
      \arrow{r}[below]{\begin{bsmallmatrix} -d_X & 1 \\ f & 0 \end{bsmallmatrix}}
      \&
      C(f)
    \end{tikzcd}
  \]
  where~$C(f)$ denotes the usual mapping cone
  \[
    C(f)
    =
    \left(
    X[1] \oplus Y,
    \begin{bmatrix}
      -d_X & 0   \\
       f   & d_Y
    \end{bmatrix}
  \right) \,.
  \]
\end{lemma}

\begin{proof}
  We calculate the pushout as
  \begin{align*}
    {}&
    \left.
    \left(
      X \oplus X[1] \oplus Y,
      \begin{bmatrix}
        0 & 1 & 0   \\
        0 & 0 & 0   \\
        0 & 0 & d_Y
      \end{bmatrix}
    \right)
    \middle/
    \gen*{
      \begin{bmatrix}
           x  \\
         d(x) \\
        -f(x)
      \end{bmatrix}
    \suchthat*
      x \in X
    }
    \right.
    \\
    \cong{}&
    \left(
      X[1] \oplus Y,
      \begin{bmatrix}
        -d_X & 0   \\
         f   & d_Y
      \end{bmatrix}
    \right)
    \\
    ={}&
    C(f)
  \end{align*}
  as claimed.
\end{proof}

\begin{remark}
  The above results is (a posteri) not surprising:
  It is a standard statement from homological algebra that for a morphism of chain complexes~$f \colon X \to Y$ the data of a morphism~$h \colon C(f) \to Z$ is the same as that of a morphism~$g \colon Y \to Z$ together with a nullhomotopy of the composition~$g \circ f \colon X \to Z$.
  Whence~$C(f)$ corepresents morphisms going out of~$Y$ whose composition with~$f$ are zero \enquote{up to homotopy}.
\end{remark}

We hence find that the pushout
\[
  \begin{tikzcd}
    M
    \arrow{r}[above]{f}
    \arrow{d}[left]{i_M}
    &
    N
    \arrow{d}
    \\
    IM
    \arrow{r}
    &
    C(f)
  \end{tikzcd}
\]
is given by~$(C(f))_x = C(f_x)$ at every~$x \in \Ob(\Acat)$, i.e.\ the~{\dgmodule{$\Acat$}}~$C(f)$ is pointwise the usual mapping cone of chain complexes.

We see that~$C(f)$ is actually the cone of~$f$ in the triangulated category~$\Homology^0(\dgdgMod{\Acat})$:
We have the following commutative diagram in which the left hand side is a pushout, and where the upper row is exact and contained in the Frobenius exact structure of~$\dgMod{\Acat}$:
\[
  \begin{tikzcd}
    0
    \arrow{r}
    &
    M
    \arrow{r}[above]{i_M}
    \arrow{d}[left]{f}
    &
    IM
    \arrow{r}[above]{p_M}
    \arrow{d}
    &
    M[1]
    \arrow{r}
    &
    0
    \\
    {}
    &
    N
    \arrow{r}
    &
    C(f)
    &
    {}
    &
    {}
  \end{tikzcd}
\]
It follows from the standard lemma of homological algebra that we can extend the above diagram to a commutative diagram
\[
  \begin{tikzcd}
    0
    \arrow{r}
    &
    M
    \arrow{r}[above]{i_M}
    \arrow{d}[left]{f}
    &
    IM
    \arrow{r}[above]{p_M}
    \arrow{d}
    &
    M[1]
    \arrow{r}
    \arrow[dashed,equal]{d}
    &
    0
    \\
    0
    \arrow[dashed]{r}
    &
    N
    \arrow{r}
    &
    C(f)
    \arrow[dashed]{r}
    &
    M[1]
    \arrow[dashed]{r}
    &
    0
  \end{tikzcd}
\]
whose row are exact.
It follows from the axioms of a Frobenius exact structure that the lower row in this diagram is again contained in the Frobenius exact structure of~$\dgMod{\Acat}$.
We have seen in the previous review on Frobenius exact structures that
\[
  M
  \xlongto{f}
  N
  \to
  C(f)
  \to
  M[1]
\]
is therefore a distinguished triangle in~$\Homology^0(\dgdgMod{\Acat})$.
This entails that~$C(f)$ is a cone of~$f$ in~$\Homology^0(\dgdgMod{\Acat})$.

We have thus seen that one can think about the cone in~$\Homology^0(\dgdgMod{\Acat})$ as a kind of \enquote{derived cokernel} of~$f$, coming from a pushout in~$\dgMod{\Acat}$ that was choosen as a \enquote{cokernel up to homotopy}.



\subsection{Extending to~$\dgdgMod{\Acat}$}

The object~$C(f)$ of the dg-category~$\Bcat \defined \dgdgMod{\Acat}$ gives a corepresentable dg-functor, i.e.~left dg-module
\[
  \widehat{C}
  \defined
  \Bcat(C(f), -)
  \colon
  \Bcat
  \to
  \dgCh(k) \,.
\]
At every object~$P \in \Ob(\Bcat)$ this left dg-module is given by the chain complex~$\widehat{C}(P)$ which is given as a graded module by
\[
  \widehat{C}(P)
  =
  \Bcat(N,P)[1] \oplus \Bcat(M,P)
\]
differential
\[
  d_{\widehat{C}(P)}
  =
  \begin{bmatrix}
    d_{\Bcat(N,P)} &  0               \\
    (-) \circ f    & -d_{\Bcat(M,P)}
  \end{bmatrix} \,.
\]
For any two objects~$P, Q \in \Ob(\Bcat)$ the morphism of chain complexes
\[
  \widehat{C}_{P,Q}
  \colon
  \Bcat(P,Q)
  \to
  \Bcat\bigl( \widehat{C}(P), \widehat{C}(Q) \bigr)
\]
is given by
\[
  g
  \mapsto
  ((a,b) \mapsto (g \circ a, (-1)^{\hdeg{g}} g \circ b) \,.
\]

We note that these formulae make sense in any dg-category.
We can therefore define for every dg-category~$\Bcat$ and every~$f \in \Cycles^0(\Bcat(x,y))$ a left~{\dgmodule{$\Bcat$}}~$C \colon \Bcat \to \Ch(k)$ by the same expressions as above.
One can then define a \defemph{cone} of~$f$ in~$\Bcat$ as a representing object for this dg-functor.
This allows us to talk about cones of morphisms in dg-categories.





\end{document}
